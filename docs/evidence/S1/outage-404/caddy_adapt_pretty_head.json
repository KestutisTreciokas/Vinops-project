{
	"apps": {
		"http": {
			"servers": {
				"srv0": {
					"listen": [
						":443"
					],
					"routes": [
						{
							"match": [
								{
									"host": [
										"vinops.online",
										"www.vinops.online"
									]
								}
							],
							"handle": [
								{
									"handler": "subroute",
									"routes": [
										{
											"handle": [
												{
													"handler": "headers",
													"response": {
														"set": {
															"Referrer-Policy": [
																"strict-origin-when-cross-origin"
															],
															"Strict-Transport-Security": [
																"max-age=31536000; includeSubDomains; preload"
															],
															"X-Content-Type-Options": [
																"nosniff"
															],
															"X-Frame-Options": [
																"SAMEORIGIN"
															]
														}
													}
												},
												{
													"encodings": {
														"gzip": {},
														"zstd": {}
													},
													"handler": "encode",
													"prefer": [
														"zstd",
														"gzip"
													]
												}
											]
										},
										{
											"group": "group2",
											"handle": [
												{
													"handler": "subroute",
													"routes": [
														{
															"handle": [
																{
																	"handler": "reverse_proxy",
																	"headers": {
																		"request": {
																			"set": {
																				"Host": [
																					"{http.request.host}"
																				],
																				"X-Forwarded-Proto": [
																					"{http.request.scheme}"
																				]
																			}
																		}
																	},
																	"upstreams": [
																		{
																			"dial": "vinopsrestore-web-1:3000"
																		}
																	]
																}
															]
														}
													]
												}
											],
											"match": [
												{
													"path": [
														"/api/*"
													]
												}
											]
										},
										{
											"group": "group2",
											"handle": [
												{
													"handler": "subroute",
													"routes": [
														{
															"handle": [
																{
																	"handler": "reverse_proxy",
																	"headers": {
																		"request": {
																			"set": {
																				"Host": [
																					"{http.request.host}"
																				],
																				"X-Forwarded-Proto": [
																					"{http.request.scheme}"
																				]
																			}
																		}
																	},
																	"upstreams": [
																		{
																			"dial": "vinopsrestore-web-1:3000"
																		}
																	]
																}
															]
														}
													]
												}
											]
										}
									]
								}
							],
							"terminal": true
						}
					]
				}
			}
		}
	}
}
