@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Light тема (по умолчанию) ---------- */
:root {
  --brand: #4F45E5;
  --brand-hover: #3361E5;
  --brand-fg: #FFFFFF;

  --fg-default: #1F1F20;
  --fg-muted: #667080;
  --fg-subtle: #737880;
  --fg-on-inverse: #FFFFFF;

  --bg-canvas: #FFFFFF;
  --bg-surface: #F7FAFF;
  --bg-muted: #F2F5F7;

  --border-muted: #E5E8ED;
  --border-strong: #D9D9D9;

  --status-error: #D94D4D;
  --status-error-hover: #CC4747;
  --status-error-fg: #FFFFFF;
  --status-success: #22C55E;
  --status-success-fg: #FFFFFF;

  --focus-ring: rgba(79, 69, 229, 0.40);
  --overlay-scrim: rgba(0,0,0,0.5);
}

/* ---------- Dark тема ---------- */
:root.dark, :root[data-theme="dark"] {
  --brand: #4F45E5;
  --brand-hover: #3361E5;
  --brand-fg: #FFFFFF;

  --fg-default: #E6E8EB;
  --fg-muted: #A8B0BD;
  --fg-subtle: #8D96A5;
  --fg-on-inverse: #FFFFFF;

  --bg-canvas: #0E1116;
  --bg-surface: #12161C;
  --bg-muted: #171C24;

  --border-muted: #232A34;
  --border-strong: #2E3743;

  --status-error: #F97070;
  --status-error-hover: #FF6B6B;
  --status-error-fg: #FFFFFF;
  --status-success: #22C55E;
  --status-success-fg: #FFFFFF;

  --focus-ring: rgba(99,102,241,0.55);
  --overlay-scrim: rgba(0,0,0,0.65);
}

/* ---------- Базовая типографика и фон ---------- */
html, body {
  height: 100%;
  background: var(--bg-canvas);
  color: var(--fg-default);
}
a { color: var(--brand); }
a:hover { color: var(--brand-hover); }

/* ---------- Компоненты ---------- */
.btn {
  @apply inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-medium transition-colors;
}
.btn-primary {
  color: var(--brand-fg);
  background: var(--brand);
}
.btn-primary:hover { background: var(--brand-hover); }

.btn-secondary {
  background: var(--bg-surface);
  color: var(--fg-default);
  border: 1px solid var(--border-muted);
}

.input {
  @apply w-full rounded-xl border px-3 py-2 outline-none;
  background: var(--bg-surface);
  color: var(--fg-default);
  border-color: var(--border-muted);
}
.input:focus { box-shadow: var(--focus-ring); }

.card {
  @apply rounded-2xl border p-4;
  background: var(--bg-surface);
  border-color: var(--border-muted);
}

.badge {
  @apply inline-flex items-center rounded-full px-2.5 py-1 text-xs border;
  background: var(--bg-muted);
  color: var(--fg-muted);
  border-color: var(--border-muted);
}

/* Контейнер-ограничитель контента */
.container-prose {
  @apply container max-w-[1200px];
}

/* ---------- Presets to match design scale ---------- */
.input-lg { @apply h-14 text-base px-4 rounded-2xl; }     /* 56px */
.btn-lg   { @apply h-12 px-5 text-base rounded-xl; }      /* 48px */
.h1       { @apply text-4xl font-semibold leading-tight; }/* ~36-40px */
.lead     { @apply text-base text-fg-muted; }             /* 16px muted */

/* ---------- Header / Navigation polish ---------- */
.site-header { 
  background: var(--bg-canvas);
  border-bottom: 1px solid var(--border-muted);
}
.site-header .inner {
  @apply container;
  height: 64px; /* фикс высота по макету */
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.logo {
  @apply font-semibold;
  font-size: 18px;
  letter-spacing: -0.01em;
}

/* Навигация */
.nav-link {
  @apply text-sm;
  color: var(--fg-muted);
  padding-bottom: 6px;
  transition: color .15s ease;
}
.nav-link:hover { color: var(--fg-default); }
.nav-link-active {
  color: var(--fg-default);
  position: relative;
}
.nav-link-active::after {
  content: "";
  position: absolute;
  left: 0; right: 0;
  bottom: 0;               /* подчёркивание вплотную к тексту */
  height: 2px;
  background: var(--brand);
  border-radius: 9999px;
}

/* Layout containers */
.container { max-width: 1200px; margin-left: auto; margin-right: auto; padding: 0 16px; }
.container-prose { max-width: 1040px; margin-left: auto; margin-right: auto; padding: 0 16px; }

/* Card baseline (похоже на макет) */
.card { @apply bg-bg-surface border border-border-muted rounded-2xl; box-shadow: 0 1px 2px rgba(16,24,40,.04); }

/* ===== Design tokens (from semantic.json) ===== */
:root {
  --brand: #4F45E5;
  --brand-fg: #FFFFFF;

  --fg-default: #1F1F20;
  --fg-muted:   #667080;
  --fg-subtle:  #737880;
  --fg-on-inverse: #FFFFFF;

  --bg-canvas:  #FFFFFF;
  --bg-surface: #F7FAFF;
  --bg-muted:   #F2F5F7;

  --border-muted: #E5EAF0;

  --status-error: #E03131; /* для invalid полей */
}

/* ===== Color tokens (Light) ===== */
:root {
  --brand: #4F45E5;
  --brand-fg: #FFFFFF;

  --fg-default: #1F1F20;
  --fg-muted:   #667080;
  --fg-subtle:  #737880;
  --fg-on-inverse: #FFFFFF;

  --bg-canvas:  #FFFFFF;
  --bg-surface: #F7FAFF;
  --bg-muted:   #F2F5F7;

  --border-muted: #E5EAF0;

  --status-error: #E03131;
}

/* ===== Color tokens (Dark) ===== */
:root[data-theme="dark"], [data-theme="dark"] {
  --brand: #4F45E5;
  --brand-fg: #FFFFFF;

  --fg-default: #E6E8EB;
  --fg-muted:   #9AA4B2;
  --fg-subtle:  #7D8A98;
  --fg-on-inverse: #0B0F17;

  --bg-canvas:  #0B0F17;
  --bg-surface: #121826;
  --bg-muted:   #0F1621;

  --border-muted: #253141;

  --status-error: #F25555;
}

/* ===== Utility mapping to variables ===== */
.text-fg-default { color: var(--fg-default); }
.text-fg-muted   { color: var(--fg-muted); }
.text-fg-subtle  { color: var(--fg-subtle); }

.bg-bg-canvas  { background-color: var(--bg-canvas); }
.bg-bg-surface { background-color: var(--bg-surface); }
.bg-bg-muted   { background-color: var(--bg-muted); }

.border-border-muted { border-color: var(--border-muted); }

.text-brand      { color: var(--brand); }
.text-brand-fg   { color: var(--brand-fg); }
.bg-brand        { background-color: var(--brand); }
.bg-brand-10     { background-color: color-mix(in hsl, var(--brand) 10%, transparent); }

/* ===== Components: buttons / inputs / cards ===== */
.btn {
  @apply inline-flex items-center justify-center font-medium transition-colors select-none;
  border-radius: 12px;
  height: 40px;
  padding: 0 14px;
}
.btn-lg { height: 48px; padding: 0 20px; border-radius: 16px; }

.btn-primary {
  background: var(--brand);
  color: var(--brand-fg);
}
.btn-primary:hover { filter: brightness(0.97); }

.btn-secondary {
  background: var(--bg-muted);
  color: var(--fg-default);
  border: 1px solid var(--border-muted);
}
.btn-secondary:hover { filter: brightness(0.98); }

.input {
  @apply w-full text-sm;
  height: 40px;
  padding: 0 12px;
  border-radius: 12px;
  background: var(--bg-canvas);
  border: 1px solid var(--border-muted);
  color: var(--fg-default);
}
.input-lg { height: 56px; padding: 0 16px; border-radius: 14px; }
.input:focus { outline: 2px solid color-mix(in hsl, var(--brand) 35%, transparent); outline-offset: 0; }

.card {
  @apply border rounded-2xl;
  background: var(--bg-surface);
  border-color: var(--border-muted);
  box-shadow: 0 1px 2px rgba(16,24,40,.05);
}

/* Header baseline */
.site-header { background: var(--bg-canvas); border-bottom: 1px solid var(--border-muted); }
.logo { color: var(--fg-default); }
.nav-link { color: var(--fg-muted); }
.nav-link:hover, .nav-link-active { color: var(--fg-default); }
.nav-link-active::after { background: var(--brand); }

/* Layout containers */
.container { max-width: 1200px; margin-left: auto; margin-right: auto; padding: 0 16px; }
.container-prose { max-width: 1040px; margin-left: auto; margin-right: auto; padding: 0 16px; }

/* Typo helpers */
.h1 { @apply text-4xl font-semibold leading-tight; }
.lead { @apply text-base; color: var(--fg-muted); }

/* Hero background (светлая/тёмная) */
.hero {
  background:
    radial-gradient(1200px 400px at 50% -150px, color-mix(in hsl, var(--brand) 10%, transparent), transparent),
    var(--bg-canvas);
}
[data-theme="dark"] .hero {
  background:
    radial-gradient(1200px 400px at 50% -150px, color-mix(in hsl, var(--brand) 18%, transparent), transparent),
    var(--bg-canvas);
}

/* Theme-aware logo (две картинки, отображаем одну) */
.logo-img-dark { display: none; }
[data-theme="dark"] .logo-img-light { display: none; }
[data-theme="dark"] .logo-img-dark { display: block; }

/* Чуть выше контраст инпутов/карт на тёмной */
[data-theme="dark"] .input { background: #0E1522; border-color: #253141; }
[data-theme="dark"] .card  { background: #101826; border-color: #253141; box-shadow: none; }
