@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Light тема (по умолчанию) ---------- */
:root {
  --shadow-1: 0 1px 2px rgba(0,0,0,.06);
  --brand: #4F45E5;
  --brand-hover: #3361E5;
  --brand-fg: #FFFFFF;

  --fg-default: #1F1F20;
  --fg-muted: #667080;
  --fg-subtle: #737880;
  --fg-on-inverse: #FFFFFF;

  --bg-canvas: #FFFFFF;
  --bg-surface: #F7FAFF;
  --bg-muted: #F2F5F7;

  --border-muted: #E5E8ED;
  --border-strong: #D9D9D9;

  --status-error: #D94D4D;
  --status-error-hover: #CC4747;
  --status-error-fg: #FFFFFF;
  --status-success: #22C55E;
  --status-success-fg: #FFFFFF;

  --focus-ring: rgba(79, 69, 229, 0.40);
  --overlay-scrim: rgba(0,0,0,0.5);
}

/* ---------- Dark тема ---------- */
:root.dark, :root[data-theme="dark"] {
  --brand: #4F45E5;
  --brand-hover: #3361E5;
  --brand-fg: #FFFFFF;

  --fg-default: #E6E8EB;
  --fg-muted: #A8B0BD;
  --fg-subtle: #8D96A5;
  --fg-on-inverse: #FFFFFF;

  --bg-canvas: #0E1116;
  --bg-surface: #12161C;
  --bg-muted: #171C24;

  --border-muted: #232A34;
  --border-strong: #2E3743;

  --status-error: #F97070;
  --status-error-hover: #FF6B6B;
  --status-error-fg: #FFFFFF;
  --status-success: #22C55E;
  --status-success-fg: #FFFFFF;

  --focus-ring: rgba(99,102,241,0.55);
  --overlay-scrim: rgba(0,0,0,0.65);
}

/* ---------- Базовая типографика и фон ---------- */
html, body {
  height: 100%;
  background: var(--bg-canvas);
  color: var(--fg-default);
}
a { color: var(--brand); }
a:hover { color: var(--brand-hover); }

/* ---------- Компоненты ---------- */
.btn {
  @apply inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-medium transition-colors;
}
.btn-primary {
  color: var(--brand-fg);
  background: var(--brand);
}
.btn-primary:hover { background: var(--brand-hover); }

.btn-secondary {
  background: var(--bg-surface);
  color: var(--fg-default);
  border: 1px solid var(--border-muted);
}

.input {
  @apply w-full rounded-xl border px-3 py-2 outline-none;
  background: var(--bg-surface);
  color: var(--fg-default);
  border-color: var(--border-muted);
}
.input:focus { box-shadow: var(--focus-ring); }

.card {
  @apply rounded-2xl border p-4;
  background: var(--bg-surface);
  border-color: var(--border-muted);
}

.badge {
  @apply inline-flex items-center rounded-full px-2.5 py-1 text-xs border;
  background: var(--bg-muted);
  color: var(--fg-muted);
  border-color: var(--border-muted);
}

/* Контейнер-ограничитель контента */
.container-prose {
  @apply container max-w-[1200px];
}

/* ---------- Presets to match design scale ---------- */
.input-lg { @apply h-14 text-base px-4 rounded-2xl; }     /* 56px */
.btn-lg   { @apply h-12 px-5 text-base rounded-xl; }      /* 48px */
.h1       { @apply text-4xl font-semibold leading-tight; }/* ~36-40px */
.lead     { @apply text-base text-fg-muted; }             /* 16px muted */

/* ---------- Header / Navigation polish ---------- */
.site-header { 
  background: var(--bg-canvas);
  border-bottom: 1px solid var(--border-muted);
}
.site-header .inner {
  @apply container;
  height: 64px; /* фикс высота по макету */
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.logo {
  @apply font-semibold;
  font-size: 18px;
  letter-spacing: -0.01em;
}

/* Навигация */
.nav-link {
  @apply text-sm;
  color: var(--fg-muted);
  padding-bottom: 6px;
  transition: color .15s ease;
}
.nav-link:hover { color: var(--fg-default); }
.nav-link-active {
  color: var(--fg-default);
  position: relative;
}
.nav-link-active::after {
  content: "";
  position: absolute;
  left: 0; right: 0;
  bottom: 0;               /* подчёркивание вплотную к тексту */
  height: 2px;
  background: var(--brand);
  border-radius: 9999px;
}

/* Layout containers */
.container { max-width: 1200px; margin-left: auto; margin-right: auto; padding: 0 16px; }
.container-prose { max-width: 1040px; margin-left: auto; margin-right: auto; padding: 0 16px; }

/* Card baseline (похоже на макет) */
.card { @apply bg-bg-surface border border-border-muted rounded-2xl; box-shadow: 0 1px 2px rgba(16,24,40,.04); }

/* ===== Design tokens (from semantic.json) ===== */
:root {
  --shadow-1: 0 1px 2px rgba(0,0,0,.06);
  --brand: #4F45E5;
  --brand-fg: #FFFFFF;

  --fg-default: #1F1F20;
  --fg-muted:   #667080;
  --fg-subtle:  #737880;
  --fg-on-inverse: #FFFFFF;

  --bg-canvas:  #FFFFFF;
  --bg-surface: #F7FAFF;
  --bg-muted:   #F2F5F7;

  --border-muted: #E5EAF0;

  --status-error: #E03131; /* для invalid полей */
}

/* ===== Color tokens (Light) ===== */
:root {
  --shadow-1: 0 1px 2px rgba(0,0,0,.06);
  --brand: #4F45E5;
  --brand-fg: #FFFFFF;

  --fg-default: #1F1F20;
  --fg-muted:   #667080;
  --fg-subtle:  #737880;
  --fg-on-inverse: #FFFFFF;

  --bg-canvas:  #FFFFFF;
  --bg-surface: #F7FAFF;
  --bg-muted:   #F2F5F7;

  --border-muted: #E5EAF0;

  --status-error: #E03131;
}



/* ===== Color tokens (Dark) ===== */
:root[data-theme="dark"], [data-theme="dark"] {
  /* по ТЗ */
  --brand: #4F45E5;      /* (5) акцент одинаковый */
  --brand-fg: #FFFFFF;

  --bg-canvas:  #171718; /* (1) фон страницы */
  --bg-muted:   #1F1F20; /* (2) “внутри полей” и т.п. */
  --bg-surface: #2E2E30; /* (3) карточки/«что вы получите» */
  --border-muted: #2E2E30; /* (4) stroke блоков */

  --fg-default: #EDEDF0; /* (6) основной текст */
  --fg-muted:   #A8A8AD; /* (7) второстепенный текст */
  --fg-subtle:  #A8A8AD;
  --fg-on-inverse: #171718;

  --status-error: #F25555;
}


/* Status tokens (Light) */
:root {
  --success-bg: #E8F5E9; --success-fg: #2E7D32;
  --warning-bg: #FFF8E1; --warning-fg: #8D6E63;
  --error-bg:   #FDECEA; --error-fg:   #C62828;
}
/* Status tokens (Dark) */
:root[data-theme="dark"], [data-theme="dark"] {
  --success-bg: #1F2A22; --success-fg: #6AD38B;
  --warning-bg: #2A261A; --warning-fg: #E6C773;
  --error-bg:   #2A1D1D; --error-fg:   #F27A7A;
}

/* Status utilities */
.bg-success { background: var(--success-bg); }
.text-success { color: var(--success-fg); }
.bg-warning { background: var(--warning-bg); }
.text-warning { color: var(--warning-fg); }
.bg-error { background: var(--error-bg); }
.text-error { color: var(--error-fg); }

/* ===== Utility mapping
/* Status tokens (Light) */
:root {
  --success-bg: #E8F5E9; --success-fg: #2E7D32;
  --warning-bg: #FFF8E1; --warning-fg: #8D6E63;
  --error-bg:   #FDECEA; --error-fg:   #C62828;
}
/* Status tokens (Dark) */
:root[data-theme="dark"], [data-theme="dark"] {
  --success-bg: #1F2A22; --success-fg: #6AD38B;
  --warning-bg: #2A261A; --warning-fg: #E6C773;
  --error-bg:   #2A1D1D; --error-fg:   #F27A7A;
}

/* Status utilities */
.bg-success { background: var(--success-bg); }
.text-success { color: var(--success-fg); }
.bg-warning { background: var(--warning-bg); }
.text-warning { color: var(--warning-fg); }
.bg-error { background: var(--error-bg); }
.text-error { color: var(--error-fg); }

/* ===== Utility mapping
/* Status tokens (Light) */
:root {
  --success-bg: #E8F5E9; --success-fg: #2E7D32;
  --warning-bg: #FFF8E1; --warning-fg: #8D6E63;
  --error-bg:   #FDECEA; --error-fg:   #C62828;
}
/* Status tokens (Dark) */
:root[data-theme="dark"], [data-theme="dark"] {
  --success-bg: #1F2A22; --success-fg: #6AD38B;
  --warning-bg: #2A261A; --warning-fg: #E6C773;
  --error-bg:   #2A1D1D; --error-fg:   #F27A7A;
}

/* Status utilities */
.bg-success { background: var(--success-bg); }
.text-success { color: var(--success-fg); }
.bg-warning { background: var(--warning-bg); }
.text-warning { color: var(--warning-fg); }
.bg-error { background: var(--error-bg); }
.text-error { color: var(--error-fg); }

/* ===== Utility mapping to variables ===== */
.text-fg-default { color: var(--fg-default); }
.text-fg-muted   { color: var(--fg-muted); }
.text-fg-subtle  { color: var(--fg-subtle); }

.bg-bg-canvas  { background-color: var(--bg-canvas); }
.bg-bg-surface { background-color: var(--bg-surface); }
.bg-bg-muted   { background-color: var(--bg-muted); }

.border-border-muted { border-color: var(--border-muted); }

.text-brand      { color: var(--brand); }
.text-brand-fg   { color: var(--brand-fg); }
.bg-brand        { background-color: var(--brand); }
.bg-brand-10     { background-color: color-mix(in hsl, var(--brand) 10%, transparent); }

/* ===== Components: buttons / inputs / cards ===== */
.btn {
  @apply inline-flex items-center justify-center font-medium transition-colors select-none;
  border-radius: 12px;
  height: 40px;
  padding: 0 14px;
}
.btn-lg { height: 48px; padding: 0 20px; border-radius: 16px; }

.btn-primary {
  background: var(--brand);
  color: var(--brand-fg);
}
.btn-primary:hover { filter: brightness(0.97); }

.btn-secondary {
  background: var(--bg-muted);
  color: var(--fg-default);
  border: 1px solid var(--border-muted);
}
.btn-secondary:hover { filter: brightness(0.98); }

.input {
  @apply w-full text-sm;
  height: 40px;
  padding: 0 12px;
  border-radius: 12px;
  background: var(--bg-canvas);
  border: 1px solid var(--border-muted);
  color: var(--fg-default);
}
.input-lg { height: 56px; padding: 0 16px; border-radius: 14px; }
.input:focus { outline: 2px solid color-mix(in hsl, var(--brand) 35%, transparent); outline-offset: 0; }

.card {
  @apply border rounded-2xl;
  background: var(--bg-surface);
  border-color: var(--border-muted);
  box-shadow: var(--shadow-1);
}

/* Header baseline */
.site-header { background: var(--bg-canvas); border-bottom: 1px solid var(--border-muted); }
.logo { color: var(--fg-default); }
.nav-link { color: var(--fg-muted); }
.nav-link:hover, .nav-link-active { color: var(--fg-default); }
.nav-link-active::after { background: var(--brand); }

/* Layout containers */
.container { max-width: 1200px; margin-left: auto; margin-right: auto; padding: 0 16px; }
.container-prose { max-width: 1040px; margin-left: auto; margin-right: auto; padding: 0 16px; }

/* Typo helpers */
.h1 { @apply text-4xl font-semibold leading-tight; }
.lead { @apply text-base; color: var(--fg-muted); }

/* Hero background (светлая/тёмная) */
.hero {
  background:
    radial-gradient(1200px 400px at 50% -150px, color-mix(in hsl, var(--brand) 10%, transparent), transparent),
    var(--bg-canvas);
}
[data-theme="dark"] .hero {
  background:
    radial-gradient(1400px 520px at 50% -200px, color-mix(in hsl, var(--brand) 14%, transparent), transparent),
    var(--bg-canvas);
}

/* Theme-aware logo (две картинки, отображаем одну) */
.logo-img-dark { display: none; }
[data-theme="dark"] .logo-img-light { display: none; }
[data-theme="dark"] .logo-img-dark { display: block; }

/* Чуть выше контраст инпутов/карт на тёмной */
[data-theme="dark"] .input { background: #0E1522; border-color: #253141; }
[data-theme="dark"] .card  { background: #101826; border-color: #253141; box-shadow: none; }


/* Тонкая подстройка под dark */
[data-theme="dark"] .input {
  background: var(--bg-muted);
  border-color: var(--border-muted);
  color: var(--fg-default);
}
[data-theme="dark"] .input::placeholder { color: var(--fg-muted); }

[data-theme="dark"] .card  {
  background: var(--bg-surface);
  border-color: var(--border-muted);
  box-shadow: none;
}

[data-theme="dark"] .site-header {
  background: var(--bg-surface);
  border-bottom-color: var(--border-muted);
}

[data-theme="dark"] .nav-link { color: var(--fg-muted); }
[data-theme="dark"] .nav-link:hover,
[data-theme="dark"] .nav-link-active { color: var(--fg-default); }

/* Кнопки */
[data-theme="dark"] .btn-secondary {
  background: var(--bg-muted);
  color: var(--fg-default);
  border-color: var(--border-muted);
}


/* Тонкая подстройка под заданные тёмные токены */
[data-theme="dark"] .input {
  background: var(--bg-muted);
  border-color: var(--border-muted);
  color: var(--fg-default);
}
[data-theme="dark"] .input::placeholder { color: var(--fg-muted); }

[data-theme="dark"] .card  {
  background: var(--bg-surface);
  border-color: var(--border-muted);
  box-shadow: none;
}

[data-theme="dark"] .site-header {
  background: var(--bg-surface);
  border-bottom-color: var(--border-muted);
}

[data-theme="dark"] .nav-link { color: var(--fg-muted); }
[data-theme="dark"] .nav-link:hover,
[data-theme="dark"] .nav-link-active { color: var(--fg-default); }

/* вторичная кнопка — как “muted” фон */
[data-theme="dark"] .btn-secondary {
  background: var(--bg-muted);
  color: var(--fg-default);
  border-color: var(--border-muted);
}

/* hero — мягкий градиент поверх #171718 */
[data-theme="dark"] .hero {
  background:
    radial-gradient(1400px 520px at 50% -200px, color-mix(in hsl, var(--brand) 14%, transparent), transparent),
    var(--bg-canvas);
}

/* Header layout */
.site-header { background: var(--bg-canvas); border-bottom: 1px solid var(--border-muted); }
[data-theme="dark"] .site-header { background: var(--bg-surface); }
.site-header-inner { height: 72px; display:flex; align-items:center; }

/* Nav links (base + active underline) */
.nav-link { position: relative; display:inline-flex; align-items:center; height: 40px; padding: 0 10px; color: var(--fg-muted); }
.nav-link:hover { color: var(--fg-default); }
.nav-link::after {
  content:''; position:absolute; left:10px; right:10px; bottom:0;
  height:2px; border-radius:2px; background: transparent; transform: scaleX(0);
  transition: transform .18s ease, background-color .18s ease;
}
.nav-link:hover::after { background: var(--border-muted); transform: scaleX(1); }
.nav-link-active { color: var(--fg-default); }
.nav-link-active::after { background: var(--brand); transform: scaleX(1); }

/* Inputs: placeholder + focus */
.input::placeholder { color: var(--fg-muted); opacity: 1; }
.input:focus { outline: 2px solid color-mix(in hsl, var(--brand) 35%, transparent); outline-offset: 0; }

/* Hero paddings (по макету ближе к 80px сверху/снизу) */
.hero { padding-top: 80px !important; padding-bottom: 80px !important; }

/* Brand tint для плашек иконок */
.brand-tint { background: color-mix(in hsl, var(--brand) 15%, transparent); }

/* Карточка преимуществ — subtle hover */
.feature-card { transition: transform .16s ease, box-shadow .16s ease, border-color .16s ease; }
.feature-card:hover { transform: translateY(-1px); border-color: var(--brand); }

/* === Catalog filters === */
.pill-tabs { display:flex; gap:8px; flex-wrap:wrap; }
.pill {
  display:inline-flex; align-items:center; height:40px; padding:0 14px;
  border-radius:999px; border:1px solid var(--border-muted);
  background: var(--bg-surface); color: var(--fg-muted);
  transition: background .15s ease, color .15s ease, border-color .15s ease;
}
.pill:hover { color: var(--fg-default); }
.pill-active { background: var(--brand); color: var(--brand-fg); border-color: var(--brand); }

.select {
  appearance:none; height:44px; border-radius:12px;
  background: var(--bg-surface); color: var(--fg-default);
  border:1px solid var(--border-muted);
  padding:0 36px 0 12px; /* справа место под стрелку */
  outline:none;
}
.select:focus { border-color: var(--brand); box-shadow: 0 0 0 2px color-mix(in hsl, var(--brand) 30%, transparent); }
.select-wrap { position:relative; }
.select-wrap .chev {
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  width:16px; height:16px; pointer-events:none; color: var(--fg-muted);
}

/* === Catalog cards === */
.vehicle-card {
  border:1px solid var(--border-muted); border-radius:16px; overflow:hidden;
  background: var(--bg-surface); transition: transform .16s ease, border-color .16s ease, box-shadow .16s ease;
}
.vehicle-card:hover { transform: translateY(-1px); border-color: var(--brand); box-shadow: 0 6px 22px rgba(0,0,0,.08); }

.vimg { aspect-ratio: 16/9; width:100%; background: var(--bg-muted); display:block; }
.vbody { padding:12px 14px 14px; }
.vtitle { font-weight:600; }
.vmeta { color: var(--fg-muted); font-size: .9rem; margin-top:4px; }
.vvin { margin-top:8px; font-size:.85rem; color: var(--fg-subtle); }

/* Пагинация */
.pager { display:flex; gap:8px; align-items:center; justify-content:center; margin-top:16px; }
.pager-btn {
  height:36px; min-width:36px; padding:0 10px; border-radius:10px;
  background: var(--bg-surface); color: var(--fg-default); border:1px solid var(--border-muted);
}
.pager-btn-active { background: var(--brand); color: var(--brand-fg); border-color: var(--brand); }

/* Контейнер секции каталога */
.catalog-head { padding-top: 24px; padding-bottom: 12px; }
.filters-bar { display:grid; gap:10px; grid-template-columns: 1fr; }
@media (min-width: 768px) {
  .filters-bar { grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr; } /* 6 ячеек под селекты */
}

/* ===== Catalog filters: layout/size fix ===== */
.filters-bar{
  display:flex; flex-wrap:wrap; align-items:center; gap:12px;
}

/* общий контейнер селекта */
.select-wrap{
  position:relative;
  min-width:180px;   /* базовая ширина всех селектов */
  height:40px;
}

/* сам <select> — единая высота/линия, фон и радиус по токенам */
.select{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  display:block; width:100%; height:40px; line-height:40px;
  padding:0 36px 0 14px;
  border:1px solid var(--border-muted);
  background:var(--bg-surface);
  color:var(--fg-default);
  border-radius:12px;
}

/* фокус */
.select:focus{
  outline:2px solid color-mix(in hsl, var(--brand) 40%, transparent);
  outline-offset:0;
}

/* стрелка в правом краю, по центру по Y */
.select-wrap .chev{
  position:absolute; right:12px; top:50%; transform:translateY(-50%);
  pointer-events:none; color:var(--fg-muted);
  font-size:14px; line-height:1;
}

/* Узкие селекты только для 4-го и 5-го (диапазон "От" / "До") */
.filters-bar .select-wrap:nth-of-type(4),
.filters-bar .select-wrap:nth-of-type(5){
  min-width:120px;
}

/* Кнопки справа смотрятся плотнее */
.filters-bar .btn{ height:40px; }
.filters-bar .btn.btn-primary{ height:40px; }

/* На узких экранах — селекты во всю ширину ряда */
@media (max-width: 640px){
  .select-wrap{ min-width: 100%; }
  .filters-bar{ gap:10px; }
}
